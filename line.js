$(document).ready(function(){var n,e,t,a,r,i,s,l,o,c,u,d,f,g,y,p,m,x,k,h,v,A,B,b,w,z,S,$,j,q,C,D;for(n=[["連任比例","第二屆","第三屆","第四屆","第五屆","第六屆","第七屆"],["25~29","-0.55","-0.55","-0.05","0.45","0.45","0.45"],["30~34","-0.35","0.20","0.28","0.01","-0.33","0.20"],["35~39","0.30","0.05","0.14","-0.18","-0.21","-0.12"],["40~44","-0.06","0.05","0.03","0.17","-0.25","0.06"],["45~49","0.02","0.08","-0.09","0.14","-0.15","-0.03"],["50~54","0.11","-0.05","-0.07","0.06","-0.17","0.11"],["55~59","0.02","0.02","-0.10","0.09","-0.18","0.15"],["60~64","0.19","0.00","-0.33","-0.30","-0.22","-0.30"],["65~69","0.00","0.00","0.00","-0.25","0.00","0.00"]],e=[400,600,40],t=e[0],a=e[1],r=e[2],i=[],s=1,l=n.length;l>s;++s)for(o=s,c=1,u=n[0].length-1;u>c;++c)d=c,i.push({age:n[o][0],session:n[0][d],y1:+n[o][d],y2:+n[o][d+1]});return f=i.map(function(n){return+n.count||0}),e=["age","session"].map(function(n){return d3.map(i,function(e){return e[n]}).keys()}),g=e[0],y=e[1],p=d3.scale.ordinal().domain(y).rangeBands([r,t-r]),m=d3.scale.ordinal().domain(g).rangeBands([a-r-20,r+20]),x=d3.svg.axis().scale(p).tickSize([1]),k=d3.svg.axis().scale(m).orient("left").tickSize([1]),h=p.rangeBand(),v=m.rangeBand(),A=d3.scale.linear().domain([1,-1]).range([0,v]),B=d3.scale.linear().domain(d3.extent(f)).range([0,40]),b=d3.scale.linear().domain(["-1","0","1"]).range([1,0,1]),w=d3.select("#svg"),z=w.append("g"),z.call(x),z.attr({"class":"x-axis",transform:"translate(0,"+(a-r)+")"}),S=w.append("g"),S.call(k),S.attr({"class":"y-axis",transform:"translate(0,0)"}),$=w.selectAll("line.line").data(i),j=$.enter(),j.append("line").attr({"class":"line"}),q=w.selectAll("line.align").data(g),C=q.enter(),C.append("line").attr({"class":"align"}),(D=function(){return w.selectAll("line.align").attr({x1:function(){return r},y1:function(n){return m(n)+v/2},x2:function(){return t-r},y2:function(n){return m(n)+v/2},stroke:"#999","stroke-width":"2","stroke-dasharray":"2 2"}),w.selectAll("line.line").attr({x1:function(n){return p(n.session)},y1:function(n){return A(n.y1)+m(n.age)},x2:function(n){return p(n.session)+h},y2:function(n){return A(n.y2)+m(n.age)},fill:function(n){return n.count<0?"#f42":"#2f4"},opacity:function(){return 1},stroke:function(n){return(n.y1+n.y2)/2<0?"#b22":"#2b2"},"stroke-width":"2"})})()});