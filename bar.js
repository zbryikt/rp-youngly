$(document).ready(function(){var n,e,a,t,r,s,l,i,c,o,d,u,g,f,m,p,y,x,h,k,v,A,B,w,z,S,$,b,j,q,C,D,E;for(n=[["連任比例","第二屆","第三屆","第四屆","第五屆","第六屆","第七屆"],["25~29","-0.55","-0.55","-0.05","0.45","0.45","0.45"],["30~34","-0.35","0.20","0.28","0.01","-0.33","0.20"],["35~39","0.30","0.05","0.14","-0.18","-0.21","-0.12"],["40~44","-0.06","0.05","0.03","0.17","-0.25","0.06"],["45~49","0.02","0.08","-0.09","0.14","-0.15","-0.03"],["50~54","0.11","-0.05","-0.07","0.06","-0.17","0.11"],["55~59","0.02","0.02","-0.10","0.09","-0.18","0.15"],["60~64","0.19","0.00","-0.33","-0.30","-0.22","-0.30"],["65~69","0.00","0.00","0.00","-0.25","0.00","0.00"]],e=[450,600,40],a=e[0],t=e[1],r=e[2],s=[],l=1,i=n.length;i>l;++l)for(c=l,o=1,d=n[0].length;d>o;++o)u=o,s.push({age:n[c][0],session:n[0][u],y1:+n[c][u]});return g=s.map(function(n){return+n.count||0}),e=["age","session"].map(function(n){return d3.map(s,function(e){return e[n]}).keys()}),f=e[0],m=e[1],p=d3.scale.ordinal().domain(m).rangeBands([r,a-r]),y=d3.scale.ordinal().domain(f).rangeBands([t-r-20,r+20]),x=d3.svg.axis().scale(p).tickSize([1]),h=d3.svg.axis().scale(y).orient("left").tickSize([1]),k=p.rangeBand(),v=y.rangeBand(),A=d3.scale.linear().domain([1,-1]).range([0,v]),B=d3.scale.linear().domain([1,0,-1]).range([.7*v,0,.7*v]),w=d3.scale.linear().domain(d3.extent(g)).range([0,40]),z=d3.scale.linear().domain(["-1","0","1"]).range([1,0,1]),S=d3.select("#svg"),$=S.append("g"),$.call(x),$.attr({"class":"x-axis",transform:"translate(0,"+(t-r)+")"}),b=S.append("g"),b.call(h),b.attr({"class":"y-axis",transform:"translate(0,0)"}),j=S.selectAll("rect.rect").data(s),q=j.enter(),q.append("rect").attr({"class":"rect"}),C=S.selectAll("line.align").data(f),D=C.enter(),D.append("line").attr({"class":"align"}),(E=function(){return S.selectAll("line.align").attr({x1:function(){return r},y1:function(n){return y(n)+v/2},x2:function(){return a-r},y2:function(n){return y(n)+v/2},stroke:"#999","stroke-width":"1","stroke-dasharray":"2 4"}),S.selectAll("rect.rect").attr({x:function(n){return p(n.session)+.2*k},y:function(n){return n.y1>0?v/2+y(n.age)-B(n.y1):y(n.age)+v/2},width:.6*k,height:function(n){return B(n.y1)},fill:function(n){return n.y1<0?"#f42":"#2f4"},stroke:"#444"})})()});